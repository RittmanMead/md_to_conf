

		----------------------------------
		Markdown to Confluence Upload Tool
		----------------------------------


Markdown file:	README.md
Space Key:	RD
Title:		Markdown to Confluence Converter
<p>A script to import a named markdown document into Confluence. It handles inline images as well as code blocks. Also there is support for some custom markdown tags for use with commonly used Confluence macros.</p>
<p>The file will be converted into HTML or Confluence storage markup when required. Then a page will be created in the space or if it already exists, the page will be uploaded.</p>
<h1>Setup</h1>
<p><a href="https://github.com/rittmanmead/md_to_conf">Download Code</a></p>
<h2>Python</h2>
<p>Python should be installed with the following required modules:</p>
<ul>
<li>requests</li>
<li>json</li>
<li>markdown</li>
<li>mimetypes</li>
<li>codecs</li>
<li>webbrowser</li>
<li>urllib</li>
<li>argparse</li>
</ul>
<p>Instructions on installing Python and modules can be found <a href="https://rittmanmead.atlassian.net/wiki/display/TECH/Python">here</a>.</p>
<h2>Environment Variables</h2>
<p>To use it, you will need your Confluence username, password and organisation name. If you use Google Apps to sign in to Confluence, you can still have a username & password for your Confluence account. Just logout and follow the "Unable to access your account?" link from the sign in page, which lets you set a new password.</p>
<p>You will also need the organisation name that is used in the subdomain. For example the URL: <code>https://fawltytowers.atlassian.net/wiki/</code> would indicate an organsiation name of <strong>fawltytowers</strong>.</p>
<p>These can be specified at runtime or set as Confluence environment variables (eg add to your ~/.profile or ~/.bash_profile on Mac OS): </p>
<ac:structured-macro ac:name="code"><ac:parameter ac:name="theme">Midnight</ac:parameter><ac:parameter ac:name="linenumbers">true</ac:parameter><ac:parameter ac:name="language">bash</ac:parameter><ac:plain-text-body><![CDATA[export CONFLUENCE_USERNAME='basil'
export CONFLUENCE_PASSWORD='abc123'
export CONFLUENCE_ORGNAME='fawltytowers'
]]></ac:plain-text-body></ac:structured-macro>

<p>On Windows, this can be set via system properties.</p>
<h1>Use</h1>
<h2>Basic</h2>
<p>The minimum accepted parameters are the markdown file to upload as well as the Confluence space key you wish to upload to. For the following examples assume 'Test Space' with key: <code>TST</code>.</p>
<ac:structured-macro ac:name="code"><ac:parameter ac:name="theme">Midnight</ac:parameter><ac:parameter ac:name="linenumbers">true</ac:parameter><ac:parameter ac:name="language">none</ac:parameter><ac:plain-text-body><![CDATA[python md2conf.py readme.md TST
]]></ac:plain-text-body></ac:structured-macro>

<p>Mandatory Confluence parameters can also be set here if not already set as environment variables:</p>
<ul>
<li><strong>-u</strong> <strong>--username</strong>: Confluence User</li>
<li><strong>-p</strong> <strong>--password</strong>: Confluence Password</li>
<li><strong>-o</strong> <strong>--orgname</strong>:  Confluence Organisation</li>
</ul>
<ac:structured-macro ac:name="code"><ac:parameter ac:name="theme">Midnight</ac:parameter><ac:parameter ac:name="linenumbers">true</ac:parameter><ac:parameter ac:name="language">none</ac:parameter><ac:plain-text-body><![CDATA[python md2conf.py readme.md TST -u basil -p abc123 -o fawltytowers
]]></ac:plain-text-body></ac:structured-macro>

<p>Use <strong>-h</strong> to view a list of all available options.</p>
<h2>Other Uses</h2>
<p>Use <strong>-a</strong> or <strong>--ancestor</strong> to designate the name of a page which the page should be created under.</p>
<ac:structured-macro ac:name="code"><ac:parameter ac:name="theme">Midnight</ac:parameter><ac:parameter ac:name="linenumbers">true</ac:parameter><ac:parameter ac:name="language">none</ac:parameter><ac:plain-text-body><![CDATA[python md2conf.py readme.md TST -a "Parent Page Name"
]]></ac:plain-text-body></ac:structured-macro>

<p>Use <strong>-d</strong> or <strong>--delete</strong> to delete the page instead of create it. Obviously this won't work if it doesn't already exist.</p>
<p>Use <strong>-n</strong> or <strong>--nossl</strong> to specify a non-SSL url, i.e. <strong>http://</strong> instead of <strong>https://</strong>.</p>
<h1>Markdown</h1>
<p>The original markdown to HTML conversion is performed by the Python <strong>markdown</strong> library. Additionally, the page name is taken from the first line of  the markdown file, usually assumed to be the title. In the case of this document, the page would be called: <strong>Markdown to Confluence Converter</strong>.</p>
<p>Standard markdown syntax for images and code blocks will be automatically converted. The images are uploaded as attachments and the references updated in the HTML. The code blocks will be converted to the Confluence Code Block macro and also supports syntax highlighting.</p>
<h2>Custom Markup</h2>
<p>The code supports some custom markdown syntax which can be used to render certain Confluence macros.</p>
<h3>Info Macro</h3>
<p>Markdown syntax:</p>
<ac:structured-macro ac:name="code"><ac:parameter ac:name="theme">Midnight</ac:parameter><ac:parameter ac:name="linenumbers">true</ac:parameter><ac:parameter ac:name="language">none</ac:parameter><ac:plain-text-body><![CDATA[~?This is an info.?~

~!This is a note.!~

~%This is a warning.%~
]]></ac:plain-text-body></ac:structured-macro>

<p>Renders as:</p>
<p><img alt="macros" src="images/macros.png" /></p>
